# 3장 타입 추론

타입스크립트는 타입 추론을 적극적으로 수행합니다. 수동으로 명시해야 하는 타입 구문의 수를 엄청나게 줄여주기 때문에, 코드의 전체적인 안정성이 향상됩니다.
숙련된 타입스크립트 개발자는 비교적 적은 수의 구문(그러나 중요한 부분에는 사용)을 사용합니다. 반면, 초보자의 코드는 불필요한 타입 구문으로 도배되어 있을 겁니다.

## 아이템 19. 추론 가능한 타입을 사용해 장황한 코드 방지하기

타입스크립트를 처음 접한 개발자가 자바스크립트 코드를 포팅할 때 가장 먼저 하는 일은 타입 구문을 넣는 것입니다. 그러나 타입스크립트의 많은 타입 구문은 사실 불필요 합니다.

```
// 1번
let x: number = 12;
// 2번
let x = 12;
```

2번처럼만 해도 충분합니다. 편집기에서 x에 마우스를 올려보면 타입이 이미 number로 추론되어 있음을 알 수 있습니다.
만약 타입을 확신하지 못한다면 편집기를 통해 체크하면 됩니다. 타입스크립트는 더 복잡한 객체도 추론할 수 있습니다.

```
const person:{
  name: string,
  born: {
    where: string,
    when: string
  }
  }={
    name: 'Dal Um',
    born: {
      where: 'Yeoju',
      when: 'undefined'
    }
  };
const person={  //타입을 생략하고 다음처럼 작성해도 충분합니다.
  name: 'Dal Um',
  born: {
    where: 'Yeoju',
    when: 'undefined'
  }
};
```

비구조화 할당문은 모든 지역변수의 타입이 추론되도록 합니다. 여기에 추가로 명시적 타입 구문을 넣는다면 불필요한 타입 선언으로 인해 코드가 번잡해 집니다.

```
function logProduct(product: Product){
  const {id, name, price} = product;
  console.loG(id, name, price);
}
```

어떤 언어들은 매개변수의 최종 사용처까지 참고하여 타입을 추론하지만, 타입스크립트는 최종 사용처까지 고려하지 않습니다. 타입스크립트에서 변수의 타입은 일반적으로 처음 등장할 때 결정됩니다.

이상적인 타입스크립트 코드는 함수/메서드 시그니처에 타입 구문을 포함하지만, 함수 내에서 생성된 지역 변수에는 타입 구문을 넣지 않습니다. 보통 타입 정보가 있는 라이브러리에서, 콜백 함수의 매개변수 타입은 자동으로 추론됩니다.

```
// 이렇게 하지 맙시다.
app.get('/health',(request: express.Request, response: express.Response)=>{resoponse.send('OK');
});
// 이렇게 합시다.
app.get('/health',(request, response)=>{resoponse.send('OK');
});
```

마찬가지로 함수의 반환에도 타입을 명시하여 오류를 방지할 수 있습니다. 반환 타입을 명시하면, 구현상의 오류가 사용자 코드의 오류로 표시되지 않습니다.

오류의 위치를 제대로 표시해 주는 이점 외에도, 반환타입을 명시해야 하는 이유가 두가지 더 있습니다.

1. 반환타입을 명시하면 함수에 대해 더욱 명확하게 알 수 있습니다.
2. 명명된 타입을 사용하기 위해서 -> 더 직관적인 표현이 됩니다.

```
interface Vector2D{ x: number, y: number}
function add(a: Vector2D, b: Vector2D){
  return {x: a.x + b.x, y: a.y + b.y}
}
```

이 경우 Vector2D와 호환되지만, 입력이 Vector2D인데 반해 출력은 Vector2D가 아니기 때문에 사용자 입장에서는 당황스러울 수 있습니다.

## 아이템 20. 다른 타입에는 다른 변수 사용하기

자바스크립트에서는 한 변수를 다른 목적을 가지는 다른 타입으로 재사용해도 됩니다. 그렇지만 타입스크립트는 곤란해요.

```
//javascript
let id = '12-34-56';
fetchProduct(id);
id = 123456;
fetchProductByNumber(id);

//typescript
let id = '12-34-56';
fetchProduct(id);
id = 123456; // ~~ error 12345 형식은 'string' 형식에 할당할 수 없습니다.
fetchProductByNumber(id); // ~~error

```
